<!DOCTYPE html>
<html>
  <head>
    <!-- 2025-08-14: Code aus dem Tutorial https://www.youtube.com/watch?v=0n5u1Z01o9M -->
    <!-- 2025-08-15: Sound und Schwierigkeitsgrad hinzugefügt, Code optimiert -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fang den Frosch! 🐸</title>
    <meta
      name="description"
      content="Entwickelt als Teil eines Frontend-Entwickler-Portfolios: 'Fang den Frosch!' ist ein spannendes Reaktionsspiel, um die Geschicklichkeit des Spielers zu testen. Erlebe eine moderne, mobil-freundliche Webanwendung, die mit HTML, CSS und JavaScript umgesetzt wurde."
    />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <main>
      <h1>Fang den Frosch! 🐸</h1>

      <p id="score">Punkte: 0</p>
      <p id="timer">Zeit: 30s</p>

      <div id="game-board">
        <div class="hole" id="hole0" onclick="hit(0)"></div>
        <div class="hole" id="hole1" onclick="hit(1)"></div>
        <div class="hole" id="hole2" onclick="hit(2)"></div>
        <div class="hole" id="hole3" onclick="hit(3)"></div>
        <div class="hole" id="hole4" onclick="hit(4)"></div>
        <div class="hole" id="hole5" onclick="hit(5)"></div>
        <div class="hole" id="hole6" onclick="hit(6)"></div>
        <div class="hole" id="hole7" onclick="hit(7)"></div>
        <div class="hole" id="hole8" onclick="hit(8)"></div>
      </div>

      <div id="end-message"></div>

      <p><button onclick="startGame()">Spiel starten</button></p>

      <p>
        Schwierigkeitsgrad:
        <input
          type="radio"
          id="difficult-easy"
          name="difficulty"
          value="leicht"
        />Leicht
        <input
          type="radio"
          id="difficult-medium"
          name="difficulty"
          value="mittel"
          checked
        />Mittel
        <input
          type="radio"
          id="difficult-heavy"
          name="difficulty"
          value="schwer"
        />Schwer
      </p>
    </main>

    <footer class="footer">
      <div class="footer-content">&copy; 2025 Frederik Anspach</div>
    </footer>

    <script>
      let currentFrog = -1;
      let score = 0;
      let timeLeft = 30;
      let frogInterval;
      let timerInterval;
      let isGameActive = false; // Status für das Spiel

      // Sound-Variablen
      const hitSounds = [
        new Audio("media/frog-hit.mp3"),
        new Audio("media/frog-hit.mp3"),
        new Audio("media/frog-hit.mp3"),
        new Audio("media/frog-hit.mp3"),
        new Audio("media/frog-hit.mp3"),
      ];
      let soundIndex = 0;
      //const gameOverSound = new Audio('media/game_over.mp3');

      // Zeiten für die Schwierigkeitsgrade
      const difficultySettings = {
        leicht: 2000,
        mittel: 1000,
        schwer: 600,
      };

      function startGame() {
        // Verhindere, dass das Spiel gestartet wird, wenn es bereits aktiv ist
        if (isGameActive) return;

        isGameActive = true;
        score = 0;
        timeLeft = 30;
        currentFrog = -1;

        // Verstecke die Nachricht vom letzten Spiel
        document.getElementById("end-message").textContent = "";

        // Setze die Anzeige der Punkte und der Zeit auf zurück
        document.getElementById("score").textContent = "Punkte: 0";
        document.getElementById("timer").textContent = `Zeit: ${timeLeft}s`;

        // Schwierigkeitsgrad abrufen
        const intervalTimer = selectDifficult();

        // Starte das Spiel mit Setzen der Intervalle
        frogInterval = setInterval(showFrog, intervalTimer);
        timerInterval = setInterval(updateTime, 1000); // 1 Sekunde für den Timer, wie besprochen
      }

      // Holt sich den Schwierigkeitsgrad aus den Radio-Inputs
      function selectDifficult() {
        const selectedRadio = document.querySelector(
          'input[name="difficulty"]:checked'
        );
        return difficultySettings[selectedRadio.value];
      }

      // Setze den Frosch auf ein zufälliges Feld
      function showFrog() {
        // Verhindere, dass neue Frösche erscheinen, wenn das Spiel nicht aktiv ist
        if (!isGameActive) return;

        if (currentFrog !== -1) hideFrog();

        currentFrog = Math.floor(Math.random() * 9);
        document.getElementById("hole" + currentFrog).textContent = "🐸";
      }

      function hideFrog() {
        if (currentFrog !== -1) {
          document.getElementById("hole" + currentFrog).textContent = "";
          currentFrog = -1; // Stelle sicher, dass der Frosch als "versteckt" markiert ist
        }
      }

      // Überprüfe ob der Frosch getroffen wurde und zähle bei einem Treffer die Punkte hoch
      function hit(index) {
        // Nur Treffer zählen, wenn das Spiel aktiv ist
        if (!isGameActive) return;

        if (index === currentFrog) {
          score++;
          document.getElementById("score").textContent = `Punkte: ${score}`;
          hideFrog();
          // >> Hier den nächsten Sound im Array abspielen <<
          hitSounds[soundIndex].play();
          soundIndex = (soundIndex + 1) % hitSounds.length; // Wechselt zum nächsten Sound
        }
      }

      // Lass die Zeit ablaufen und beende das Spiel mit Beenden der Intervalle
      // Gib den Text für das Spielende aus
      function updateTime() {
        timeLeft--;
        document.getElementById("timer").textContent = `Zeit: ${timeLeft}s`;

        if (timeLeft <= 0) {
          // Spiel beenden
          isGameActive = false;
          clearInterval(frogInterval);
          clearInterval(timerInterval);

          // Setze den Frosch zurück
          if (currentFrog !== -1) {
            document.getElementById("hole" + currentFrog).textContent = "";
          }
          currentFrog = -1;

          // Zeige die Endnachricht mit dem korrekten Endstand an
          document.getElementById(
            "end-message"
          ).textContent = `Spiel vorbei! Du hast ${score} Punkte!`;
        }
      }
    </script>
  </body>
</html>
